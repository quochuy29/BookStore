var Editor=function(a){"use strict";function n(n){return-1!==e.map(function(n){return n.toLowerCase()}).indexOf(n.toLowerCase())}function t(){return{listeners:[],scriptId:S("tiny-script"),scriptLoaded:!1}}function m(){var n="undefined"!=typeof window?window:global;return n&&n.tinymce?n.tinymce:null}var o,y=function(){return(y=Object.assign||function(n){for(var t,e=1,o=arguments.length;e<o;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},e=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],g=function(e,o,i){Object.keys(o).filter(n).forEach(function(n){var t=o[n];"function"==typeof t&&("onInit"===n?t(e,i):i.on(n.substring(2),function(n){return t(n,i)}))})},C=function(e,n,o,t){var i=e.modelEvents||null,i=Array.isArray(i)?i.join(" "):i;a.watch(t,function(n,t){o&&"string"==typeof n&&n!==t&&n!==o.getContent({format:e.outputFormat})&&o.setContent(n)}),o.on(i||"change input undo redo",function(){n.emit("update:modelValue",o.getContent({format:e.outputFormat}))})},i=0,S=function(n){var t=Date.now();return n+"_"+Math.floor(1e9*Math.random())+ ++i+String(t)},h=function(n){return void 0===n||""===n?[]:Array.isArray(n)?n:n.split(" ")},b=(o=t(),{load:function(n,t,e){o.scriptLoaded?e():(o.listeners.push(e),n.getElementById(o.scriptId)||function(n,t,e,o){var i=t.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=n,i.src=e;function r(){i.removeEventListener("load",r),o()}i.addEventListener("load",r),t.head&&t.head.appendChild(i)}(o.scriptId,n,t,function(){o.listeners.forEach(function(n){return n()}),o.scriptLoaded=!0}))},reinitialize:function(){o=t()}}),r={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(n){return"html"===n||"text"===n}}};return a.defineComponent({props:r,setup:function(u,l){function e(){var n,t,a=(n=f,d?function(){return null!=c&&c.value?c.value:""}:function(){return n?p:v}),e=y(y({},u.init),{readonly:u.disabled,selector:"#"+r,plugins:(e=u.init&&u.init.plugins,t=u.plugins,h(e).concat(h(t))),toolbar:u.toolbar||u.init&&u.init.toolbar,inline:s,setup:function(r){(i=r).on("init",function(n){return t=n,e=u,o=l,i=c,(n=r).setContent(a()),o.attrs["onUpdate:modelValue"]&&C(e,o,n,i),void g(t,o.attrs,n);var t,e,o,i}),u.init&&"function"==typeof u.init.setup&&u.init.setup(r)}});null!==(t=o.value)&&"textarea"===t.tagName.toLowerCase()&&(o.value.style.visibility=""),m().init(e),f=!1}var n=a.toRefs(u),t=n.disabled,c=n.modelValue,o=a.ref(null),i=null,r=u.id||S("tiny-vue"),s=u.init&&u.init.inline||u.inline,d=!!l.attrs["onUpdate:modelValue"],f=!0,p=u.initialValue||"",v="";return a.watch(t,function(n){null!==i&&i.setMode(n?"readonly":"design")}),a.onMounted(function(){var n,t;null!==m()?e():o.value&&o.value.ownerDocument&&(t=u.cloudChannel||"5",n=u.apiKey||"no-api-key",t=null==u.tinymceScriptSrc?"https://cdn.tiny.cloud/1/"+n+"/tinymce/"+t+"/tinymce.min.js":u.tinymceScriptSrc,b.load(o.value.ownerDocument,t,e))}),a.onBeforeUnmount(function(){null!==m()&&m().remove(i)}),s||(a.onActivated(function(){f||e()}),a.onDeactivated(function(){var n;d||(v=i.getContent()),null!==(n=m())&&void 0!==n&&n.remove(i)})),function(){return s?(n=a.h,t=o,e=u.tagName,n(e||"div",{id:r,ref:t})):(0,a.h)("textarea",{id:r,visibility:"hidden",ref:o});var n,t,e}}})}(Vue);
